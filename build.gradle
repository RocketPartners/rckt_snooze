apply plugin: 'eclipse'
apply plugin: 'maven'
apply plugin: 'war'
apply plugin: 'java'

project.docsDirName='../docs/0.3.x/'

configurations.all {
    resolutionStrategy.cacheChangingModulesFor 0, 'seconds'
}

//trying to get this file to change so jitpack will reprocess

version = '0.3.x'
group = 'com.github.RocketPartners'

repositories { 
   mavenLocal()
   mavenCentral() 
   maven { url 'https://jitpack.io' }
   //maven { url "http://redshift-maven-repository.s3-website-us-east-1.amazonaws.com/release" }
}


sourceCompatibility = 1.8

dependencies {

	if (gradle.ext.rckt_snooze['addFortJProjectToClasspath']) {
    		compile findProject(":fort_j")
    }
    else {
   		compile("com.github.wellsb1:fort_j:release-1.0.x-SNAPSHOT") { changing = true }
    }
    
    	if (gradle.ext.rckt_snooze['addFortSProjectToClasspath']) {
    		compile findProject(":fort_s")
    }
    else {
   		compile("com.github.wellsb1:fort_s:release-1.0.x-SNAPSHOT") { changing = true }
    }
    
    	if (gradle.ext.rckt_snooze['addFortWProjectToClasspath']) {
    		compile findProject(":fort_w")
    }
    else {
   		compile("com.github.wellsb1:fort_w:release-1.0.x-SNAPSHOT") { changing = true }
    }

	compile group: 'org.bouncycastle', name: 'bcprov-jdk15on', version: '1.55'
	
	compile group: 'com.mchange', name: 'c3p0', version: '0.9.5.2'
	compile group: 'com.mchange', name: 'mchange-commons-java', version: '0.2.11'
	
	compile group: 'commons-codec', name: 'commons-codec', version: '1.10'
	compile group: 'commons-collections', name: 'commons-collections', version: '3.2.1'
	compile group: 'org.apache.commons', name: 'commons-csv', version: '1.4'
	compile group: 'commons-httpclient', name: 'commons-httpclient', version: '3.1'
	compile group: 'org.apache.commons', name: 'commons-lang3', version: '3.4'

	
	// required for the Redis client
    compile group: 'redis.clients', name: 'jedis', version: '2.9.0'
	
	compile 'com.amazonaws:aws-java-sdk-s3:1.11.390'
	compile 'com.amazonaws:aws-java-sdk-dynamodb:1.11.390'

    //drivers for supportd DBs	
	compile group: 'mysql', name: 'mysql-connector-java', version: '5.1.34'
	compile 'org.postgresql:postgresql:42.1.4'
    //compile group: 'com.amazon.redshift', name: 'redshift-jdbc42-no-awssdk', version: '1.2.18.1036'
	
	compile group: 'com.auth0', name: 'java-jwt', version: '3.1.0'
	
	compile group: 'ch.qos.logback', name: 'logback-classic', version: '1.1.11'
	
	compile "javax.servlet:javax.servlet-api:3.1.0"
	
	compile 'net.jodah:expiringmap:0.5.8'
	compile group: 'org.graalvm', name: 'graal-sdk', version: '1.0.0-rc7'
	compile group: 'com.oracle.truffle', name: 'truffle-api', version: '1.0.0-rc7'
	compile files('libs/graaljs.jar')
    compile files('libs/tregex.jar')
	
	testCompile 'junit:junit:4.12'
	
}


task devJar(type: Jar) {
    from sourceSets.main.output
}

artifacts {
    archives devJar
}


//build {
	//dependsOn ("devJar")


//artifacts
//{
//  jarConfig jar
//}


/************************************************************
 * Ensuring source directories are created if they do not 
 * already exist when running 'gradle eclipse'
 * Also sets Java 6 as the default target within Eclipse
 */
eclipse {
    classpath {
        file {
            tasks.eclipse.dependsOn(cleanEclipseClasspath)
            tasks.eclipse.dependsOn("create-dirs")
        }
    }
}



/************************************************************
 * This task should be used when creating a new project as
 * it will create all source and resource directories.  This
 * task is automatically executed during the 
 * 'gradle eclipse' command.
 */
task "create-dirs" {
    doLast {
       sourceSets*.java.srcDirs*.each { it.mkdirs() }
       sourceSets*.resources.srcDirs*.each { it.mkdirs() }
   }
}

javadoc {
    exclude "**/utils/**"
    exclude "**/evo/**"
}

  
